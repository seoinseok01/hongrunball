<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>인석이가 만든 홍런볼</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <main class="container">

    <!-- ===== HOME 화면 ===== -->
    <section id="home">
      <h1>인석이가 만든 홍런볼</h1>
      <p class="desc">1인 연습 모드와 온라인 다인 경쟁 모드로 즐기는 숫자야구 게임입니다.</p>

      <!-- 모드 선택 -->
      <section class="panel">
        <h2>모드 선택</h2>
        <div class="row">
          <button id="soloModeBtn" class="mode-btn active">혼자서</button>
          <button id="pairModeBtn" class="mode-btn" disabled>둘이서(준비중)</button>
          <button id="compModeBtn" class="mode-btn">여럿이서</button>
        </div>
        <p class="hint">
          혼자서 : 혼자 노는 걸 좋아하는 당신에게 딱 맞춤 ㅋㅋ<br />
          둘이서 : 둘이서 놀기에 딱이에요
          여럿이서 : 최대 10명까지!! 다같이 경쟁하기.
        </p>
      </section>

      <!-- 1인 모드 패널 -->
      <section id="soloPanel" class="panel">
        <h2>1인 모드 홍런볼</h2>
        <p class="hint">랜덤으로 만들어진 숫자를 혼자서 맞추는 연습 모드입니다.</p>

        <div class="row">
          <label>
            자리수:
            <input id="soloLengthInput" type="number" min="3" max="8" value="5" />
          </label>
        </div>

        <div class="row">
          <div class="mode-row">
            <label>
              <input type="radio" name="soloMode" value="unique" checked />
              숫자 중복 금지
            </label>
            <label>
              <input type="radio" name="soloMode" value="dup3" />
              숫자 중복 허용 (같은 숫자 최대 3번)
            </label>
          </div>
        </div>

        <div class="row">
          <button id="soloStartBtn">새 게임 시작</button>
        </div>

        <p id="soloStatus" class="status"></p>

        <div class="row">
          <input
            id="soloGuessInput"
            type="text"
            inputmode="numeric"
            pattern="\d*"
            placeholder="추측 입력"
          />
          <button id="soloGuessBtn">확인</button>
        </div>

        <div id="soloMsg" class="error"></div>

        <h3>내 기록</h3>
        <ul id="soloLog" class="history"></ul>
      </section>

      <!-- 다인 경쟁 모드 패널 -->
      <section id="compPanel" class="panel hidden">
        <h2>다인 경쟁 모드</h2>
        <p class="hint">
          한 방에 최대 10명이 들어와서, <br />
          프로그램이 만든 같은 정답 숫자를 두고 누가 먼저/잘 맞추는지 겨루는 모드입니다.
        </p>

        <!-- 플레이어 이름 -->
        <section class="panel">
          <h3>플레이어 정보</h3>
          <div class="row">
            <input id="nameInput" type="text" placeholder="이름 입력 (예: 인석)" />
            <button id="saveNameBtn">이름 저장</button>
          </div>
          <p class="hint">이름은 브라우저에 저장돼서 다음에 접속해도 유지됩니다.</p>
        </section>

        <!-- 방 만들기 -->
        <section class="panel">
          <h3>방 만들기</h3>
          <div class="row">
            <input id="compRoomNameInput" type="text" placeholder="방 이름(직접 입력) 또는 비워두면 랜덤 6자리" />
          </div>
          <div class="row">
            <label>
              자리수:
              <input id="compLenInput" type="number" min="3" max="8" value="5" />
            </label>
          </div>
          <div class="row">
            <div class="mode-row">
              <label>
                <input type="radio" name="compMode" value="unique" checked />
                숫자 중복 금지
              </label>
              <label>
                <input type="radio" name="compMode" value="dup3" />
                숫자 중복 허용 (같은 숫자 최대 3번)
              </label>
            </div>
          </div>
          <div class="row">
            <button id="createCompRoomBtn">방 만들기</button>
          </div>
          <p class="hint">랜덤 6자리 예: 482916</p>
        </section>

        <!-- 방 리스트 -->
        <section class="panel">
          <h3>방 목록 (최근 방)</h3>
          <ul id="compRoomList" class="list"></ul>
          <p class="hint">방을 클릭하면 입장합니다. 한 방에는 최대 10명까지 입장 가능합니다.</p>
        </section>

        <!-- 관리자 모드 (방 삭제용) -->
        <section class="panel">
          <h3>관리자 모드</h3>
          <div class="row">
            <input id="adminKeyInput" type="password" placeholder="관리자 키 입력" />
            <button id="openAdminBtn">관리자 페이지 열기</button>
          </div>
          <p class="hint">⚠ 테스트용 관리자 키 예시: <b>hongrunball</b></p>
          <div id="adminPanel" class="hidden">
            <h4>방 목록 (관리자용 삭제)</h4>
            <ul id="adminRoomList" class="list"></ul>
          </div>
        </section>
      </section>

    </section>

    <!-- ===== 다인 경쟁 방 화면 ===== -->
    <section id="compRoom" class="hidden">
      <div class="room-header">
        <div>
          <button id="backHomeBtn" class="ghost small">← 홈으로</button>
        </div>
        <div class="room-info">
          <div><b>방:</b> <span id="roomTitle"></span></div>
          <div><b>코드:</b> <span id="roomCode"></span></div>
          <div>
            <b>방장:</b> <span id="hostName"></span>
            <span id="hostBadge" class="badge hidden">HOST</span>
          </div>
        </div>
      </div>

      <!-- 정보 패널 -->
      <section class="panel">
        <h2>대기 / 게임 정보</h2>
        <p>플레이어: <span id="playersList"></span></p>
        <p id="settingsInfo" class="hint"></p>
        <p id="phaseInfo" class="status"></p>
      </section>

      <!-- 게임 패널 -->
      <section class="panel">
        <h2>게임 진행</h2>

        <div id="hostControlRow" class="row hidden">
          <button id="startGameBtn">게임 시작</button>
        </div>

        <p id="guideInfo" class="hint"></p>

        <div id="guessRow" class="row hidden">
          <input
            id="guessInput"
            type="text"
            inputmode="numeric"
            pattern="\d*"
            placeholder="추측 입력"
          />
          <button id="guessBtn">확인</button>
        </div>

        <div id="msg" class="error"></div>

        <h3>내 기록</h3>
        <ul id="myLog" class="history"></ul>

        <h3>랭킹 / 요약</h3>
        <ul id="rankList" class="history"></ul>

        <div class="row end-row">
          <button id="exitRoomBtn">방 나가기</button>
        </div>
      </section>
    </section>

    <!-- 홍런볼 축하 오버레이 (다인 경쟁 모드에서도 사용 가능) -->
    <div id="celebrate" class="celebrate hidden">
      <div class="celebrate-box">
        <div id="celebrateText">홍런볼!! 🎉</div>
        <div class="row center-row" style="margin-top: 16px;">
          <button id="celebrateCloseBtn">확인</button>
        </div>
      </div>
    </div>

  </main>

  <!-- Firebase SDK (compat 버전) + 게임 로직 -->
  <script src="https://www.gstatic.com/firebasejs/11.0.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/11.0.1/firebase-database-compat.js"></script>
  <script src="script.js"></script>
</body>
</html>

